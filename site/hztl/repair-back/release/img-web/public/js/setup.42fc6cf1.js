(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setup"],{"51da":function(t,e,a){},"621a":function(t,e,a){"use strict";a("51da")},"8be6":function(t,e,a){"use strict";a("9c0d")},"9c0d":function(t,e,a){},a434:function(t,e,a){"use strict";var i=a("23e7"),n=a("23cb"),s=a("a691"),r=a("50c4"),l=a("7b0b"),o=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min,y=9007199254740991,h="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var a,i,u,d,p,m,v=l(this),b=r(v.length),k=n(t,b),S=arguments.length;if(0===S?a=i=0:1===S?(a=0,i=b-k):(a=S-2,i=g(f(s(e),0),b-k)),b+a-i>y)throw TypeError(h);for(u=o(v,i),d=0;d<i;d++)p=k+d,p in v&&c(u,d,v[p]);if(u.length=i,a<i){for(d=k;d<b-i;d++)p=d+i,m=d+a,p in v?v[m]=v[p]:delete v[m];for(d=b;d>b-i+a;d--)delete v[d-1]}else if(a>i)for(d=b-i;d>k;d--)p=d+i-1,m=d+a-1,p in v?v[m]=v[p]:delete v[m];for(d=0;d<a;d++)v[d+k]=arguments[d+2];return v.length=b-i+a,u}})},d382:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout-main",[a("div",{staticClass:"setup-component ht-container"},[a("div",{staticClass:"ht-header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submit}},[t._v(" 保存 ")])],1),a("div",{staticClass:"ht-main"},[a("el-form",{staticClass:"form-item-small-margin-bottom clearfix",attrs:{size:"mini","label-width":"80px"}},[a("div",{staticClass:"main-left"},[a("ht-card",{attrs:{title:"库存展示"}},[a("el-button",{attrs:{slot:"after-title",type:"primary",size:"mini",plain:""},on:{click:t.addSku},slot:"after-title"},[t._v("+添加")]),t._l(t.formData.skuSetting,(function(e,i){return a("el-form-item",{key:i,attrs:{label:"库存区间："}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:10}},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{clearable:"",placeholder:"开始值",maxlength:100},nativeOn:{keyup:function(a){e.startQty=t.integerValidate(e.startQty)}},model:{value:e.startQty,callback:function(a){t.$set(e,"startQty","string"===typeof a?a.trim():a)},expression:"sku.startQty"}})],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"divider"})]),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{clearable:"",placeholder:"结束值",maxlength:100},nativeOn:{keyup:function(a){e.endQty=t.integerValidate(e.endQty)}},model:{value:e.endQty,callback:function(a){t.$set(e,"endQty","string"===typeof a?a.trim():a)},expression:"sku.endQty"}})],1)],1)],1),a("el-col",{staticClass:"row-select",attrs:{span:10}},[a("el-select",{attrs:{placeholder:""},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"sku.type"}},t._l(t.skuOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-input",{directives:[{name:"show",rawName:"v-show",value:5===e.type,expression:"sku.type === 5"}],attrs:{maxlength:100},nativeOn:{keyup:function(a){e.upperLimitQty=t.integerValidate(e.upperLimitQty)}},model:{value:e.upperLimitQty,callback:function(a){t.$set(e,"upperLimitQty","string"===typeof a?a.trim():a)},expression:"sku.upperLimitQty"}})],1),a("el-col",{attrs:{span:3}},[a("i",{directives:[{name:"show",rawName:"v-show",value:i,expression:"index"}],staticClass:"el-icon-error",attrs:{title:"删除"},on:{click:function(e){return t.deleteSku(i)}}})])],1)],1)}))],2)],1),a("div",{staticClass:"main-right"},[a("ht-card",{attrs:{title:"价格展示"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{staticClass:"row-select",attrs:{span:10}},[a("el-form-item",{attrs:{label:"选择价格类型：","label-width":"102px"}},[a("el-select",{attrs:{clearable:"",placeholder:""},model:{value:t.formData.priceSetting,callback:function(e){t.$set(t.formData,"priceSetting",e)},expression:"formData.priceSetting"}},t._l(t.priceOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{staticClass:"font12 text-orange",staticStyle:{"line-height":"30px"},attrs:{span:14}},[t._v(" *不展示价格时会在页面上展示“请询价”字样 ")])],1)],1)],1)])],1)])])},n=[],s=(a("d81d"),a("a434"),a("a9e3"),a("ac1f"),a("5319"),a("5530")),r=a("d4ec"),l=a("bee2"),o=a("262e"),c=a("2caf"),u=a("9ab4"),d=a("60a3"),p=a("cbd3"),m=a("f8a6"),f=[{id:0,name:"有货"},{id:1,name:"充足"},{id:2,name:"紧张"},{id:3,name:"缺货"},{id:4,name:"真实库存"},{id:5,name:"设置展示上限"}],g=[{id:"None",name:"不展示价格"},{id:"Alliance",name:"平台价格"},{id:"Allot",name:"调货价格"},{id:"Retail",name:"零售价"},{id:"P",name:"批发价"},{id:"P1",name:"批发价1"},{id:"P2",name:"批发价2"},{id:"P3",name:"批发价3"},{id:"P4",name:"批发价4"},{id:"P5",name:"批发价5"},{id:"P6",name:"批发价6"},{id:"P7",name:"批发价7"},{id:"P8",name:"批发价8"},{id:"P9",name:"批发价9"},{id:"P10",name:"批发价10"}],y=a("6b02"),h=function(){function t(){Object(r["a"])(this,t)}return Object(l["a"])(t,[{key:"getSettings",value:function(){return Object(y["a"])({url:"/whsc/companies/settings/my"})}},{key:"updateSettings",value:function(t){return Object(y["a"])({method:"put",data:t,url:"/whsc/companies/settings/my",showLoad:!0})}}]),t}(),v=new h,b={startQty:"",endQty:"",type:0,upperLimitQty:""},k=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.formData={priceSetting:"",skuSetting:[Object(s["a"])({},b)]},t.skuOptions=f,t.priceOptions=g,t}return Object(l["a"])(a,[{key:"getSettings",value:function(){var t=this;v.getSettings().then((function(e){var a={priceSetting:e.priceSetting,skuSetting:e.skuSetting||[]};Object.assign(t.formData,a)}))}},{key:"addSku",value:function(){this.formData.skuSetting.push(Object(s["a"])({},b))}},{key:"deleteSku",value:function(t){this.formData.skuSetting.length>1&&this.formData.skuSetting.splice(t,1)}},{key:"submit",value:function(){for(var t=this,e=this.formData,a=e.skuSetting,i=e.priceSetting,n=0;n<a.length;n++){var s=a[n],r=s.startQty,l=s.endQty,o=s.type,c=s.upperLimitQty;if(5===o&&!c)return void this.messageError("上限值不能为空");if(r&&l){if(Number(l)<=Number(r))return void this.messageError("开始值需要小于结束值")}else if(!r&&!l)return void this.messageError("开始值与结束值不能同时为空")}var u={priceSetting:i,skuSetting:a.map((function(t){return{startQty:t.startQty||null,endQty:t.endQty||null,type:t.type,upperLimitQty:t.upperLimitQty||null}}))};v.updateSettings(u).then((function(){t.messageSuccess("保存成功"),t.getSettings()}))}},{key:"messageSuccess",value:function(t){this.$message.success(t)}},{key:"messageError",value:function(t){this.$message.error(t)}},{key:"integerValidate",value:function(t){return t=t.replace(/[^\d]/g,""),t}},{key:"created",value:function(){this.getSettings()}}]),a}(d["e"]);k=Object(u["a"])([Object(d["a"])({name:"Setup",components:{LayoutMain:p["a"],HtCard:m["a"]}})],k);var S=k,Q=S,w=(a("621a"),a("2877")),x=Object(w["a"])(Q,i,n,!1,null,"2b14d11c",null);e["default"]=x.exports},f8a6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{class:{"no-padding":t.noPadding,"no-background":t.noBackground,"box-card":!0}},[t.title?a("div",{staticClass:"title-box",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),t.tips?a("el-popover",{attrs:{placement:"top",width:"500",trigger:"click"}},[a("p",{domProps:{innerHTML:t._s(t.tips)}}),a("i",{staticClass:"el-icon-question",staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})]):t._e(),a("div",{staticClass:"after-title"},[t._t("after-title")],2)],1):t._e(),t._t("default")],2)},n=[],s={name:"HtCard",componentName:"HtCard",props:{title:{type:String,default:function(){return""}},noPadding:{type:Boolean,default:function(){return!1}},noBackground:{type:Boolean,default:function(){return!1}},tips:{type:String,default:function(){return""}}}},r=s,l=(a("8be6"),a("2877")),o=Object(l["a"])(r,i,n,!1,null,"58d4a0e2",null);e["a"]=o.exports}}]);