(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["commodity"],{"2eb0":function(e,t,a){},"35c6":function(e,t,a){},"4ff1":function(e,t,a){"use strict";a("56db")},"56db":function(e,t,a){},"8ccc":function(e,t,a){},"9eff":function(e,t,a){"use strict";a("2eb0")},b3be:function(e,t,a){"use strict";a("8ccc")},ebd4:function(e,t,a){"use strict";a("35c6")},f5ba:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout-main",[e.visible?a("div",{staticClass:"layout-container"},[a("ht-tabs",{staticClass:"tabs-primary tabs-large",attrs:{tabs:e.tabs},on:{change:e.changeTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}}),a("div",{staticClass:"layout-main m-main"},[a(e.activeTab,{tag:"components"})],1)],1):e._e()])},r=[],o=(a("ac1f"),a("5319"),a("d4ec")),i=a("bee2"),s=a("262e"),l=a("2caf"),c=a("9ab4"),u=a("60a3"),p=a("cbd3"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-container bg-color-white"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"name",label:"平台名称",width:"180"}}),a("el-table-column",{attrs:{prop:"priceTypes",label:"授权价格类型","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.priceTypes?t.row.priceTypes.join("、"):"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"properties",label:"授权配件性质","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.properties?t.row.properties.join("、"):"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"stores",label:"授权配件仓库","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stores?t.row.stores.join("、"):"")+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("编辑")])]}}])})],1),a("EditDialog",{ref:"editDialog",on:{update:e.getAuthSetting}})],1)},h=[],m=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑",visible:e.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{attrs:{model:e.formData,size:"mini","label-width":"122px"}},[a("el-form-item",{attrs:{label:"平台名称："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"授权价格类型：",required:""}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.formData.priceTypes,callback:function(t){e.$set(e.formData,"priceTypes",t)},expression:"formData.priceTypes"}},e._l(e.priceTypeOptions,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"授权配件性质：",required:""}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.formData.properties,callback:function(t){e.$set(e.formData,"properties",t)},expression:"formData.properties"}},e._l(e.propertyOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"授权配件仓库：",required:""}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.formData.stores,callback:function(t){e.$set(e.formData,"stores",t)},expression:"formData.stores"}},e._l(e.storeOptions,(function(e){return a("el-option",{key:e.depotNo,attrs:{label:e.depotName,value:e.depotNo}})})),1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.hide}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v(" 确 定 ")])],1)])}),f=[],d=a("6b02"),g=a("9c26"),v=function(){function e(){Object(o["a"])(this,e)}return Object(i["a"])(e,[{key:"getAuthSetting",value:function(){return Object(d["a"])({url:"/companies/erp/authorizations/setting/whsc",module:g["a"].accounts})}},{key:"updateAuthSetting",value:function(e){return Object(d["a"])({method:"put",data:e,url:"/companies/erp/authorizations/setting/whsc",module:g["a"].accounts,showLoad:!0})}},{key:"getAuthPriceTypes",value:function(){return Object(d["a"])({url:"/companies/erp/authorizations/basic/whsc/price-type",module:g["a"].accounts})}},{key:"getAuthPropertys",value:function(){return Object(d["a"])({url:"/companies/erp/authorizations/basic/whsc/property",module:g["a"].accounts})}},{key:"getAuthStores",value:function(){return Object(d["a"])({url:"/companies/erp/authorizations/basic/whsc/store",module:g["a"].accounts})}},{key:"getParts",value:function(e){return Object(d["a"])({url:"/whsc/m8/parts/whsc",params:e})}},{key:"partsPublish",value:function(e){return Object(d["a"])({method:"post",data:e,url:"/whsc/m8/parts/publish/whsc"})}},{key:"partsUnpublish",value:function(e){return Object(d["a"])({method:"post",data:e,url:"/whsc/m8/parts/unpublish/whsc"})}}]),e}(),y=new v,O=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.visible=!1,e.formData={name:"",priceTypes:[],properties:[],stores:[]},e.priceTypeOptions=[],e.propertyOptions=[],e.storeOptions=[],e}return Object(i["a"])(a,[{key:"update",value:function(){}},{key:"show",value:function(e){Object.assign(this.formData,e),this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"getAuthPriceTypes",value:function(){var e=this;y.getAuthPriceTypes().then((function(t){e.priceTypeOptions=t||[]}))}},{key:"getAuthPropertys",value:function(){var e=this;y.getAuthPropertys().then((function(t){e.propertyOptions=t||[]}))}},{key:"getAuthStores",value:function(){var e=this;y.getAuthStores().then((function(t){e.storeOptions=t||[]}))}},{key:"submit",value:function(){var e=this,t=this.formData,a=t.priceTypes,n=t.properties,r=t.stores;a.length?n.length?r.length?y.updateAuthSetting({priceTypes:a,properties:n,stores:r}).then((function(){e.update(),e.hide()})):this.$message.warning("授权配件仓库不能为空"):this.$message.warning("授权配件性质不能为空"):this.$message.warning("授权价格类型不能为空")}},{key:"created",value:function(){this.getAuthPriceTypes(),this.getAuthPropertys(),this.getAuthStores()}}]),a}(u["e"]);Object(c["a"])([Object(u["b"])("update")],O.prototype,"update",null),O=Object(c["a"])([Object(u["a"])({name:"EditDialog"})],O);var j=O,k=j,P=(a("9eff"),a("2877")),T=Object(P["a"])(k,m,f,!1,null,"15e7ae26",null),w=T.exports,S=new v,C=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.tableData=[],e}return Object(i["a"])(a,[{key:"getAuthSetting",value:function(){var e=this;this.loading=!0,S.getAuthSetting().then((function(t){var a=[];t&&(t.name="配修市场",a.push(t)),e.tableData=a,e.loading=!1})).catch((function(){e.tableData=[],e.loading=!1}))}},{key:"handleClick",value:function(e){this.editDialog.show(e)}},{key:"created",value:function(){this.getAuthSetting()}},{key:"editDialog",get:function(){return this.$refs.editDialog}}]),a}(u["e"]);C=Object(c["a"])([Object(u["a"])({name:"Parameters",components:{EditDialog:w}})],C);var _=C,z=_,D=Object(P["a"])(z,b,h,!1,null,null,null),F=D.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-container"},[a("ht-tabs",{staticClass:"tabs-regular bg-color-white",attrs:{tabs:e.tabs},on:{change:e.changeTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}}),a("div",{staticClass:"layout-main"},[a(e.activeTab,{tag:"components"})],1)],1)},I=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ht-container"},[a("PartsSearchComponent",{attrs:{searchForm:e.searchForm},on:{handleQuery:e.handleQuery,resetSearchForm:e.resetSearchForm}}),a("div",{staticClass:"ht-main bg-color-white"},[a("PartsTableComponent",{ref:"partsTableComponent",attrs:{searchForm:e.searchForm}})],1)],1)},A=[],N=a("5530"),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parts-search bg-color-white"},[a("el-form",{staticClass:"form-item-small-margin-bottom ",attrs:{model:e.searchForm,size:"mini","label-width":"100px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"配件名称："}},[a("el-input",{attrs:{clearable:"",placeholder:"ERP/原厂/标准名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"配件品牌："}},[a("el-input",{attrs:{clearable:"",placeholder:"配件品牌"},model:{value:e.searchForm.brand,callback:function(t){e.$set(e.searchForm,"brand",t)},expression:"searchForm.brand"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"配件编码："}},[a("el-input",{attrs:{clearable:"",placeholder:"配件编码"},model:{value:e.searchForm.code,callback:function(t){e.$set(e.searchForm,"code",t)},expression:"searchForm.code"}})],1)],1),a("el-col",{attrs:{span:6}},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 查询 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.resetSearchForm}},[e._v(" 清空条件 ")])],1)])],1)],1)],1)},Q=[],U=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"resetSearchForm",value:function(){}},{key:"handleQuery",value:function(){}}]),a}(u["e"]);Object(c["a"])([Object(u["d"])()],U.prototype,"searchForm",void 0),Object(c["a"])([Object(u["b"])("resetSearchForm")],U.prototype,"resetSearchForm",null),Object(c["a"])([Object(u["b"])("handleQuery")],U.prototype,"handleQuery",null),U=Object(c["a"])([Object(u["a"])({name:"PartsSearchComponent"})],U);var q=U,G=q,L=(a("b3be"),Object(P["a"])(G,E,Q,!1,null,"fe4f461c",null)),R=L.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parts-table layout-container"},[a("div",{staticClass:"layout-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"partsTable",staticClass:"el-table-primary",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"partId",label:"配件ID",width:"150"}}),a("el-table-column",{attrs:{prop:"partNo",label:"配件编码","min-width":"150"}}),a("el-table-column",{attrs:{prop:"partName",label:"配件名称","min-width":"150"}}),a("el-table-column",{attrs:{prop:"brand",label:"配件品牌","min-width":"150"}}),a("el-table-column",{attrs:{prop:"factory",label:"配件产地","min-width":"150"}}),a("el-table-column",{attrs:{prop:"insureCertType",label:"保险认证分类","min-width":"150"}})],1)],1),a("div",{staticClass:"pagination-wrap"},[a("div",{staticClass:"button-group"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.selectDatas.length},on:{click:function(t){return e.toggleParts(e.selectDatas)}}},[e._v(" "+e._s(e.isUp?"下架选中的配件":"上架选中的配件")+" ")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.tableData.length},on:{click:function(t){return e.toggleParts(e.tableData)}}},[e._v(" "+e._s(e.isUp?"下架查询的全部配件":"上架查询的全部配件")+" ")])],1),a("ht-pagination",{staticStyle:{"text-align":"right"},attrs:{pageInfo:e.pageInfo},on:{load:e.getParts}})],1)])},H=[],J=(a("d81d"),a("4bb5")),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{"current-page":e.pageInfo.page,"page-sizes":e.storePageInfo.pageSizeList,"page-size":e.storePageInfo.pageSize,layout:e.storePageInfo.layout,total:e.pageInfo.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"page",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.storePageInfo,"pageSize",t)},"update:page-size":function(t){return e.$set(e.storePageInfo,"pageSize",t)}}})},K=[],V=Object(J["a"])("tablePage"),W=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"changePageSize",value:function(e){return e}},{key:"handleload",value:function(){}},{key:"handleSizeChange",value:function(e){return this.changePageSize(e),this.handleload(),e}},{key:"handleCurrentChange",value:function(e){return this.handleload(),e}}]),a}(u["e"]);Object(c["a"])([V.Getter("tablePageInfo")],W.prototype,"storePageInfo",void 0),Object(c["a"])([V.Mutation("changePageSize")],W.prototype,"changePageSize",null),Object(c["a"])([Object(u["d"])({default:function(){return{page:1,totalSize:0}}})],W.prototype,"pageInfo",void 0),Object(c["a"])([Object(u["b"])("load")],W.prototype,"handleload",null),Object(c["a"])([Object(u["b"])("size-change")],W.prototype,"handleSizeChange",null),Object(c["a"])([Object(u["b"])("current-change")],W.prototype,"handleCurrentChange",null),W=Object(c["a"])([Object(u["a"])({name:"HtPagination"})],W);var X=W,Y=X,Z=Object(P["a"])(Y,M,K,!1,null,null,null),ee=Z.exports,te=new v,ae=Object(J["a"])("tablePage"),ne=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.pageInfo={page:1,totalSize:0},e.tableData=[],e.selectDatas=[],e}return Object(i["a"])(a,[{key:"handleSelectionChange",value:function(e){this.selectDatas=e}},{key:"toggleParts",value:function(e){var t=this,a={partIds:e.map((function(e){return e.partId})),isAll:!1},n=te.partsPublish,r="上架操作成功";this.isUp&&(n=te.partsUnpublish,r="下架操作成功"),n(a).then((function(){t.$message.success(r),t.pageInfo.page=1,t.getParts()}))}},{key:"clearSelection",value:function(){this.partsTable.clearSelection(),this.selectDatas=[]}},{key:"getParts",value:function(){var e=this;this.loading=!0;var t=Object(N["a"])(Object(N["a"])({},this.searchForm),{},{page:this.pageInfo.page,pageSize:this.pageSize});te.getParts(t).then((function(t){e.tableData=t.rows||[],e.pageInfo.totalSize=t.totalSize||0,e.loading=!1})).catch((function(){e.pageInfo.page=1,e.pageInfo.totalSize=0,e.tableData=[],e.loading=!1}))}},{key:"created",value:function(){this.getParts()}},{key:"isUp",get:function(){return this.searchForm.isUp}},{key:"partsTable",get:function(){return this.$refs.partsTable}}]),a}(u["e"]);Object(c["a"])([ae.Getter("pageSize")],ne.prototype,"pageSize",void 0),Object(c["a"])([Object(u["d"])()],ne.prototype,"searchForm",void 0),ne=Object(c["a"])([Object(u["a"])({name:"PartsTableComponent",components:{HtPagination:ee}})],ne);var re=ne,oe=re,ie=(a("4ff1"),Object(P["a"])(oe,B,H,!1,null,"62847a8a",null)),se=ie.exports,le={code:"",name:"",brand:""},ce=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.searchForm=Object(N["a"])(Object(N["a"])({},le),{},{isUp:!0}),e}return Object(i["a"])(a,[{key:"resetSearchForm",value:function(){Object.assign(this.searchForm,le)}},{key:"handleQuery",value:function(){this.partsTableComponent.getParts(),this.partsTableComponent.clearSelection()}},{key:"partsTableComponent",get:function(){return this.$refs.partsTableComponent}}]),a}(u["e"]);ce=Object(c["a"])([Object(u["a"])({name:"OnParts",components:{PartsSearchComponent:R,PartsTableComponent:se}})],ce);var ue=ce,pe=ue,be=Object(P["a"])(pe,x,A,!1,null,null,null),he=be.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ht-container"},[a("PartsSearchComponent",{attrs:{searchForm:e.searchForm},on:{handleQuery:e.handleQuery,resetSearchForm:e.resetSearchForm}}),a("div",{staticClass:"ht-main bg-color-white"},[a("PartsTableComponent",{ref:"partsTableComponent",attrs:{searchForm:e.searchForm}})],1)],1)},fe=[],de=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.searchForm=Object(N["a"])(Object(N["a"])({},le),{},{isUp:!1}),e}return Object(i["a"])(a,[{key:"resetSearchForm",value:function(){Object.assign(this.searchForm,le)}},{key:"handleQuery",value:function(){this.partsTableComponent.getParts(),this.partsTableComponent.clearSelection()}},{key:"partsTableComponent",get:function(){return this.$refs.partsTableComponent}}]),a}(u["e"]);de=Object(c["a"])([Object(u["a"])({name:"OffParts",components:{PartsSearchComponent:R,PartsTableComponent:se}})],de);var ge=de,ve=ge,ye=Object(P["a"])(ve,me,fe,!1,null,null,null),Oe=ye.exports,je=a("ade3"),ke=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.routeParamsName="tabName",e.defaultTab="",e.activeTab=null,e}return Object(i["a"])(a,[{key:"_setActiveTab",value:function(){this.activeTab=this.$route.query[this.routeParamsName]||this.defaultTab,this.changeTab()}},{key:"changeTab",value:function(){var e=this.activeTab||this.defaultTab;this.$route.query[this.routeParamsName]!==e&&this.$router.push({query:Object(N["a"])(Object(N["a"])({},this.$route.query),{},Object(je["a"])({},this.routeParamsName,e))})}},{key:"onRouteChange",value:function(e,t){t.name===this.$options.name&&e.name===this.$options.name&&(this.activeTab=this.activeTab||e.query[this.routeParamsName]||this.defaultTab,this.changeTab())}},{key:"created",value:function(){this._setActiveTab()}},{key:"activated",value:function(){this._setActiveTab()}}]),a}(u["e"]);Object(c["a"])([Object(u["f"])("$route")],ke.prototype,"onRouteChange",null),ke=Object(c["a"])([u["a"]],ke);var Pe=ke,Te=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.routeParamsName="childTabName",e.activeTab="OnParts",e.defaultTab="OnParts",e.tabs=[{id:"OnParts",name:"已上架配件"},{id:"OffParts",name:"已下架配件"}],e}return a}(Object(u["c"])(Pe));Te=Object(c["a"])([Object(u["a"])({name:"Shelves",components:{OnParts:he,OffParts:Oe}})],Te);var we=Te,Se=we,Ce=Object(P["a"])(Se,$,I,!1,null,null,null),_e=Ce.exports,ze=Object(J["a"])("base"),De=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.visible=!1,e.activeName="parameters",e.activeTab="Parameters",e.defaultTab="Parameters",e.tabs=[{id:"Parameters",name:"参数设置"},{id:"Shelves",name:"配件上下价"}],e}return Object(i["a"])(a,[{key:"watchBaseInfo",value:function(e){var t=e.erpType,a=void 0===t?0:t;if(1===a)this.visible=!0;else if(2===a){this.visible=!1;var n="";n=location.origin.replace("repair","manual"),window.open(n,"manual")}}}]),a}(Object(u["c"])(Pe));Object(c["a"])([ze.Getter("baseInfo")],De.prototype,"baseInfo",void 0),Object(c["a"])([Object(u["f"])("baseInfo",{deep:!0,immediate:!0})],De.prototype,"watchBaseInfo",null),De=Object(c["a"])([Object(u["a"])({name:"Commodity",components:{LayoutMain:p["a"],Parameters:F,Shelves:_e}})],De);var Fe=De,$e=Fe,Ie=(a("ebd4"),Object(P["a"])($e,n,r,!1,null,"782e2e4a",null));t["default"]=Ie.exports}}]);