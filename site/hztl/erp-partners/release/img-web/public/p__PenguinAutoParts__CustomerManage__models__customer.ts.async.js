(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{AuMV:function(e,a,t){"use strict";t.r(a);var r=t("jHYr"),n=t.n(r),s=(t("miYZ"),t("tsqr")),i=t("d6i3"),u=t.n(i),p=t("p0pE"),c=t.n(p),o=t("QIwG"),d=t("k/Of"),l={list:[],selectedRows:[],search:{erpName:"",name:"",bindStatus:0,bindDateStart:"",bindDateEnd:""},paginationData:{current:1,pageSize:d["defaultPageSize"]},totalSize:0,checkAll:!1,bindVisible:!1,unbindVisible:!1,authCodeList:[],bindParams:{},unbindParams:{},erpCustomerList:[],checkedErpCustomer:{erpId:"",erpCode:"",erpName:""},isBind:!1},v={namespace:"customer",state:c()({},l),effects:{fetchData(e,a){return u.a.mark(function e(){var t,r,n,s,i;return u.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.call,r=a.put,n=a.select,e.next=3,r({type:"saveCheckAll",payload:!1});case 3:return e.next=5,n(e=>{return c()({},e.customer.search,{page:e.customer.paginationData.current,pageSize:e.customer.paginationData.pageSize})});case 5:return s=e.sent,e.prev=6,e.next=9,t(o["g"],s);case 9:return i=e.sent,e.next=12,r({type:"saveData",payload:i});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e["catch"](6),e.next=18,r({type:"clearData"});case 18:case"end":return e.stop()}},e,null,[[6,14]])})()},searchChange(e,a){return u.a.mark(function t(){var r,n;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,n=a.put,t.next=4,n({type:"saveSearch",payload:r});case 4:return t.next=6,n({type:"fetchData",payload:r});case 6:case"end":return t.stop()}},t)})()},paginationDataChange(e,a){return u.a.mark(function t(){var r,n;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,n=a.put,t.next=4,n({type:"savePaginationData",payload:r});case 4:return t.next=6,n({type:"fetchData",payload:r});case 6:case"end":return t.stop()}},t)})()},loadErpCustomerList(e,a){return u.a.mark(function t(){var r,n,s,i,p;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,n=a.call,s=a.put,i={page:1,pageSize:50,name:r},t.next=5,n(o["h"],i);case 5:return p=t.sent,t.next=8,s({type:"saveErpCustomerList",payload:p.rows||[]});case 8:case"end":return t.stop()}},t)})()},startBindDialog(e,a){return u.a.mark(function t(){var r,n,s,i;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.payload,n=e.isBind,s=a.put,i={},!r.id){t.next=10;break}if(i={customers:[r]},!n){t.next=8;break}return t.next=8,s({type:"saveCheckedErpCustomer",payload:{erpId:r.erpId,erpCode:r.erpCode,erpName:r.erpName}});case 8:t.next=11;break;case 10:i=c()({},r);case 11:return t.next=13,s({type:"loadErpCustomerList",payload:""});case 13:return t.next=15,s({type:"saveBindParams",payload:i});case 15:return t.next=17,s({type:"showBindDialog",payload:n});case 17:case"end":return t.stop()}},t)})()},submitBind(e,a){return u.a.mark(function t(){var r,n,i,p,d;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,n=a.select,i=a.call,p=a.put,t.next=4,n(e=>{return c()({},e.customer.bindParams,{erpCustomer:c()({},e.customer.checkedErpCustomer)})});case 4:return d=t.sent,t.next=7,i(o["a"],d);case 7:return s["a"].success("\u7ed1\u5b9a\u64cd\u4f5c\u6210\u529f\uff01"),t.next=10,p({type:"hideBindDialog"});case 10:return t.next=12,p({type:"fetchData",payload:r});case 12:case"end":return t.stop()}},t)})()},startUnbindDialog(e,a){return u.a.mark(function t(){var r,n;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,n=a.put,t.next=4,n({type:"saveUnbindParams",payload:r});case 4:return t.next=6,n({type:"saveUnbindVisible",payload:!0});case 6:case"end":return t.stop()}},t)})()},submitUnbind(e,a){return u.a.mark(function t(){var r,i,p,d;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n()(e),r=a.select,i=a.call,p=a.put,t.next=4,r(e=>{return c()({},e.customer.unbindParams)});case 4:return d=t.sent,t.next=7,i(o["b"],d);case 7:return s["a"].success("\u89e3\u7ed1\u64cd\u4f5c\u6210\u529f\uff01"),t.next=10,p({type:"fetchData"});case 10:return t.next=12,p({type:"saveUnbindVisible",payload:!1});case 12:case"end":return t.stop()}},t)})()}},reducers:{clearData(e){var a;return c()({},l,e,{list:[],selectedRows:[],paginationData:{current:1,pageSize:(null===e||void 0===e?void 0:null===(a=e.paginationData)||void 0===a?void 0:a.pageSize)||d["defaultPageSize"]},totalSize:0})},saveData(e,a){var t=a.payload;return c()({},l,e,{list:t&&t.rows||[],selectedRows:[],totalSize:t?t.totalSize:0})},saveSelectedRows(e,a){var t=a.payload;return c()({},l,e,{selectedRows:t})},saveSearch(e,a){var t=a.payload;return c()({},l,e,{search:t})},savePaginationData(e,a){var t=a.payload;return c()({},l,e,{paginationData:t})},saveCheckAll(e,a){var t=a.payload;return c()({},l,e,{checkAll:t})},saveBindParams(e,a){var t=a.payload;return c()({},l,e,{bindParams:c()({partnerKey:"QEQP"},t)})},saveAuthCodeList(e,a){var t=a.payload;return c()({},l,e,{authCodeList:t})},saveUnbindParams(e,a){var t=a.payload;return c()({},l,e,{unbindParams:c()({partnerKey:"QEQP"},t)})},showBindDialog(e,a){var t=a.payload;return c()({},l,e,{isBind:t,bindVisible:!0})},hideBindDialog(e){return c()({},l,e,{bindVisible:!1,checkedErpCustomer:{erpId:"",erpCode:"",erpName:""}})},saveUnbindVisible(e,a){var t=a.payload;return c()({},l,e,{unbindVisible:t})},saveErpCustomerList(e,a){var t=a.payload;return c()({},l,e,{erpCustomerList:t})},saveCheckedErpCustomer(e,a){var t=a.payload;return c()({},l,e,{checkedErpCustomer:c()({},t)})}}};a["default"]=v}}]);