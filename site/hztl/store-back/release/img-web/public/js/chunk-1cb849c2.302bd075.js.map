{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/views/customer/labelManage/labelManage.vue?b3f4","webpack:///./src/views/customer/labelManage/services/index.js","webpack:///src/views/customer/labelManage/labelManage.vue","webpack:///./src/views/customer/labelManage/labelManage.vue?77e0","webpack:///./src/views/customer/labelManage/labelManage.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./src/views/customer/labelManage/labelManage.vue?3e11"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","model","value","callback","$$v","searchIpt","expression","on","searchFn","_v","resetFn","addLabelFn","ref","tableData","handleSelectionChange","sortChange","scopedSlots","_u","fn","scope","row","$event","toReplaceClick","_s","customerCount","editClick","$index","delClick","tableDataChange","searchResult","selection","allDeleteFn","pageInfo","page","pageSize","totalSize","handleSizeChange","handleCurrentChange","labelTitle","labelVisible","labelForm","rules","$set","slot","cancelClick","saveClick","submitClick","_e","staticRenderFns","LabelManageApi","params","request","baseURL","SERVICE_MODULE_MAP","accounts","url","method","data","id","name","multipleSelection","order","editIndex","searchAll","created","sessionStorage","removeItem","mounted","initData","methods","obj","labelManageApi","getLabelsInfo","then","console","log","error","$refs","multipleTable","clearSelection","path","query","labelId","$router","push","index","assign","val","$confirm","deleteFn","cond","ids","delData","forEach","p","deleteLabels","message","type","$message","toggleSelection","rows","formName","validate","valid","insertLabels","updateLabels","component","_classCallCheck","instance","TypeError"],"mappings":"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","file":"js/chunk-1cb849c2.302bd075.js","sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"label_manage\"},[_c('div',{staticClass:\"label_search\"},[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"size\":\"small\",\"placeholder\":\"标签名称\",\"suffix-icon\":\"el-icon-search\"},model:{value:(_vm.searchIpt),callback:function ($$v) {_vm.searchIpt=$$v},expression:\"searchIpt\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.searchFn}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.resetFn}},[_vm._v(\"重置\")])],1),_c('div',{staticClass:\"add_label\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addLabelFn}},[_vm._v(\"新建标签\")])],1),_c('el-table',{ref:\"multipleTable\",staticClass:\"xtable\",staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\",\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\",\"tooltip-effect\":\"dark\",\"height\":\"450px\"},on:{\"selection-change\":_vm.handleSelectionChange,\"sort-change\":_vm.sortChange}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"type\":\"selection\",\"align\":\"center\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"标签名称\",\"align\":\"center\",\"min-width\":\"300\"}}),_c('el-table-column',{attrs:{\"prop\":\"customerCount\",\"label\":\"客户数\",\"align\":\"center\",\"sortable\":\"custom\",\"min-width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.customerCount)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toReplaceClick(scope.row)}}},[_vm._v(\" \"+_vm._s(scope.row.customerCount)+\" \")]):_c('span',[_vm._v(_vm._s(scope.row.customerCount))])]}}])}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"align\":\"center\",\"width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.editClick(scope.row,scope.$index)}}},[_vm._v(\"编辑\")]),_c('el-button',{staticClass:\"txt_danger\",attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.delClick(scope.row,scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"page_footer\"},[_c('div',[_c('el-checkbox',{on:{\"change\":function($event){return _vm.tableDataChange(_vm.tableData)}},model:{value:(_vm.searchResult),callback:function ($$v) {_vm.searchResult=$$v},expression:\"searchResult\"}},[_vm._v(\"全选当前查询结果\")]),_c('span',{staticStyle:{\"margin\":\"0px 6px\",\"padding\":\"0px 6px\",\"border-left\":\"1px solid #000\",\"border-right\":\"1px solid #000\"}},[_vm._v(\"已选中 \"+_vm._s(_vm.selection.length)+\" 条\")]),_c('span',[_vm._v(\"批量操作\")]),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"plain\":\"\",\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":_vm.allDeleteFn}},[_vm._v(\"删除\")])],1),_c('el-pagination',{attrs:{\"current-page\":_vm.pageInfo.page,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageInfo.pageSize,\"layout\":\"total, prev, pager, next, jumper, sizes\",\"total\":_vm.pageInfo.totalSize},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":_vm.labelTitle,\"close-on-click-modal\":false,\"visible\":_vm.labelVisible,\"width\":\"450px\"},on:{\"update:visible\":function($event){_vm.labelVisible=$event}}},[_c('el-form',{ref:\"labelForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.labelForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"标签名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"最多可输入10个字符\"},model:{value:(_vm.labelForm.name),callback:function ($$v) {_vm.$set(_vm.labelForm, \"name\", $$v)},expression:\"labelForm.name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.cancelClick('labelForm')}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveClick('labelForm')}}},[_vm._v(\"保存\")]),(_vm.labelTitle == '新建标签')?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitClick('labelForm')}}},[_vm._v(\"保存并新建\")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request, { SERVICE_MODULE_MAP } from \"@/utils/request\";\n\n\nexport class LabelManageApi {\n\n  //获取标签列表 \n  getLabelsInfo(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/companies/labels`,\n      method: \"get\",\n      params\n    });\n  }\n\n\n  //删除标签list \n  deleteLabels(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/companies/labels`,\n      method: \"delete\",\n      data: params\n    });\n  }\n\n  //新增 标签list \n  insertLabels(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/companies/labels`,\n      method: \"post\",\n      data: params\n    });\n  }\n\n  //编辑修改标签list\n  updateLabels(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/companies/labels/${params.id}`,\n      method: \"post\",\n      data: params\n    });\n  }\n}\n","<template>\n  <div class=\"label_manage\">\n    <div class=\"label_search\">\n      <el-input size=\"small\"\n        style=\"width:300px;\"\n        placeholder=\"标签名称\"\n        suffix-icon=\"el-icon-search\"\n        v-model=\"searchIpt\">\n      </el-input>\n      <el-button type=\"primary\" size=\"small\" style=\"margin-left: 10px;\" @click=\"searchFn\">查询</el-button>\n      <el-button size=\"small\" @click=\"resetFn\">重置</el-button>\n    </div>\n    <div class=\"add_label\">\n      <el-button type=\"primary\" size=\"small\" \n      @click=\"addLabelFn\">新建标签</el-button>\n    </div>\n    \n    <el-table ref=\"multipleTable\"  \n      class=\"xtable\" size=\"small\"\n      @selection-change=\"handleSelectionChange\"\n      @sort-change=\"sortChange\"\n      :data=\"tableData\" border  stripe\n      tooltip-effect=\"dark\" \n      height=\"450px\"\n      style=\"width: 100%\">\n      <el-table-column\n        fixed\n        type=\"selection\"\n        align='center'\n        width=\"55\">\n      </el-table-column>\n      <el-table-column\n        prop=\"name\"\n        label=\"标签名称\"\n        align='center'\n        min-width=\"300\">\n      </el-table-column>\n      <el-table-column\n        prop=\"customerCount\"\n        label=\"客户数\"\n        align='center'\n        sortable=\"custom\"\n        min-width=\"300\"\n        >\n        <template slot-scope=\"scope\">\n          <el-button v-if=\"scope.row.customerCount\" @click=\"toReplaceClick(scope.row)\" type=\"text\" size=\"small\">\n            {{scope.row.customerCount}}\n          </el-button>\n          <span v-else>{{scope.row.customerCount}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        align=\"center\"\n        width=\"160\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"editClick(scope.row,scope.$index)\" type=\"text\" size=\"small\">编辑</el-button>\n          <el-button @click=\"delClick(scope.row,scope.$index)\" type=\"text\" class=\"txt_danger\"  size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"page_footer\">\n      <div>\n        <el-checkbox v-model=\"searchResult\" @change=\"tableDataChange(tableData)\">全选当前查询结果</el-checkbox> \n        <span style=\"margin: 0px 6px;padding:0px 6px;border-left:1px solid #000;border-right:1px solid #000;\">已选中 {{selection.length}} 条</span>\n        <span>批量操作</span>\n        <el-button plain size=\"small\" type=\"danger\" style=\"margin-left:5px;\"\n          @click=\"allDeleteFn\">删除</el-button>\n      </div>\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageInfo.page\"\n        :page-sizes=\"[10, 20, 30, 40]\"\n        :page-size=\"pageInfo.pageSize\"\n        layout=\"total, prev, pager, next, jumper, sizes\"\n        :total=\"pageInfo.totalSize\">\n      </el-pagination>\n    </div>\n    <el-dialog\n      :title=\"labelTitle\" :close-on-click-modal='false'\n      :visible.sync=\"labelVisible\"\n      width=\"450px\">\n      <el-form :model=\"labelForm\" :rules=\"rules\" ref=\"labelForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n        <el-form-item label=\"标签名称\" prop=\"name\">\n          <el-input v-model=\"labelForm.name\" size=\"small\" placeholder=\"最多可输入10个字符\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"cancelClick('labelForm')\">取消</el-button>\n        <el-button size=\"small\" type=\"primary\" @click=\"saveClick('labelForm')\">保存</el-button>\n        <el-button size=\"small\" type=\"primary\" v-if=\"labelTitle == '新建标签'\"  @click=\"submitClick('labelForm')\">保存并新建</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { LabelManageApi } from './services'\nconst labelManageApi = new LabelManageApi();\n\nexport default {\n  name: \"label_manage_page\",\n  data(){\n    return{\n      tableData: [],\n      multipleSelection: [],\n      selection: [],//已选中\n      searchIpt:'',\n      order:'',//排序\n      pageInfo:{\n        page: 1,\n        totalSize:100,\n        pageSize:20\n      },\n      searchResult:false,\n      labelVisible:false,\n      labelTitle:\"新建标签\",\n      labelForm:{\n        name:'',\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入标签名称', trigger: 'blur' },\n          {  max: 10, message: '最多可输入10个字符', trigger: 'blur' }\n        ],\n      },\n      editIndex:-1,\n      searchAll:false,//  delete查询结果所有,true:是;false:不是\n    }\n  },\n  created(){\n    sessionStorage.removeItem(\"customerQueryObj\");\n  },\n  mounted(){\n    this.initData();\n  },\n  methods:{\n    initData(){//数据初始化\n      let obj = {\n        page:this.pageInfo.page,\n        pageSize:this.pageInfo.pageSize,\n        name:this.searchIpt,\n      };\n      if(this.order){\n        if(this.order == 'descending'){//客户数降序\n          obj.order = 'customerCount-desc';\n        }else if(this.order == 'ascending'){//客户数升序\n          obj.order = 'customerCount-asc';\n        }\n      }\n      labelManageApi.getLabelsInfo(obj).then(res =>{\n      \n        this.tableData = res.rows || [];\n        this.pageInfo.totalSize = res.totalSize;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    searchFn(){\n      this.initData();\n      this.$refs.multipleTable.clearSelection();\n      this.searchResult = false;\n    },\n    sortChange({order}){\n      this.order = order;\n      this.initData();\n    },\n    resetFn(){\n      this.searchIpt = '';\n      this.searchFn();\n    },\n    toReplaceClick(row){//跳转\n      let obj = {\n        path:'/customerQuery',\n        query:{\n          labelId:row.id\n        }\n      }\n      this.$router.push(obj);\n      // window.location.replace('#/rplm_custom?labelId='+row.id);\n    },\n    editClick(row,index) {//编辑\n      this.labelTitle = '编辑标签';\n      this.editIndex = index;\n      this.labelVisible = true;\n      this.labelForm = Object.assign({},row);\n      \n    },\n    \n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      this.selection = val;\n    },\n    handleSizeChange(val) {\n      this.pageInfo.pageSize = val;\n      this.pageInfo.page = 1;\n      this.initData();\n    },\n    handleCurrentChange(val) {\n      this.pageInfo.page = val;\n      this.initData();\n    },\n    delClick(row,index) {//删除\n      this.searchAll = false;\n      this.$confirm('删除后已标记的客户将自动失去该标签，你确定要删除当前标签吗？')\n      .then(_ => {\n        //调用删除接口\n\n        this.deleteFn(row,0);\n      })\n      .catch(_ => {});\n    },\n    deleteFn(delData,type){\n      let obj = {};\n      if(!type){\n        obj = {\n          searchAll:this.searchAll,\n          cond:{\n            name:this.searchIpt\n          },\n          ids:[delData.id]\n        };\n      }else{\n        obj = {\n          searchAll:this.searchAll,\n          cond:{\n            name:this.searchIpt\n          },\n          ids:[]\n        };\n        delData.forEach(p=>{\n          obj.ids.push(p.id);\n        })\n      }\n      labelManageApi.deleteLabels(obj).then(res =>{\n        this.$message({\n          message: '删除成功',\n          type: 'success'\n        });\n        this.searchFn();\n      }).catch(error =>{\n        console.log(error?error:'删除失败');\n      });\n    },\n    allDeleteFn(){//批量删除\n      if(!this.selection.length){\n        this.$message({\n          message: '你还没有选择数据',\n          type: 'warning'\n        });\n        return false;\n      }\n      this.$confirm('删除后已标记的客户将自动失去该标签，你确定要删除当前标签吗？')\n      .then(_ => {\n        //调用删除接口\n        this.deleteFn(this.selection,1);\n      })\n      .catch(error => {\n        this.$message.error(error);\n      });\n      \n    },\n    tableDataChange(val){\n      this.toggleSelection(val);\n    },\n    toggleSelection(rows) {\n      if (rows) {\n        this.searchAll = true;\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.searchAll = false;\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n    addLabelFn(){//新建标签\n      this.labelTitle = '新建标签';\n      this.labelVisible = true;\n      this.labelForm = {\n        // name:'',\n      }\n    },\n    cancelClick(formName){//取消\n      this.labelVisible = false;\n      // this.$refs[formName].resetFields();\n    },\n    saveClick(formName){//保存\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if(this.labelTitle == '新建标签'){//新建\n            labelManageApi.insertLabels(this.labelForm).then(res =>{\n              this.$message({\n                message: '新建标签成功',\n                type: 'success'\n              });\n              this.initData();\n              this.labelVisible = false;\n              this.$refs[formName].resetFields();\n            }).catch(error => {\n              console.log(error);\n            });\n\n          }else{//编辑\n            //保存接口\n            let params = {\n              id:this.labelForm.id,\n              name:this.labelForm.name\n            }\n            labelManageApi.updateLabels(this.labelForm).then(res =>{\n              this.$message({\n                message: '编辑成功',\n                type: 'success'\n              });\n              this.initData();\n              this.labelVisible = false;\n            }).catch(error => {\n              console.log(error);\n            });\n          }\n          \n        } else {\n          return false;\n        }\n      });\n    },\n    submitClick(formName){//保存并新建\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          //保存并新建接口\n          labelManageApi.insertLabels(this.labelForm).then(res =>{\n            this.$message({\n              message: '新建标签成功',\n              type: 'success'\n            });\n            this.initData();\n            // this.labelVisible = false;\n            this.$refs[formName].resetFields();\n          }).catch(error => {\n            console.log(error);\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n\n  .label_manage{\n    background: #ffffff;\n    height: 100%;\n    overflow: hidden;\n    text-align: left;\n    padding:  @padding-size-main;\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n    .add_label{\n      margin:@margin-size-main 0;\n    }\n    .txt_danger{\n      color:#F56C6C;\n    }\n    .txt_danger:hover{\n      color:#f78989;\n    }\n    .page_footer{\n      font-size: 14px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 10px;\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labelManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labelManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./labelManage.vue?vue&type=template&id=ce8cac1c&scoped=true&\"\nimport script from \"./labelManage.vue?vue&type=script&lang=js&\"\nexport * from \"./labelManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./labelManage.vue?vue&type=style&index=0&id=ce8cac1c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce8cac1c\",\n  null\n  \n)\n\nexport default component.exports","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./labelManage.vue?vue&type=style&index=0&id=ce8cac1c&lang=less&scoped=true&\""],"sourceRoot":""}