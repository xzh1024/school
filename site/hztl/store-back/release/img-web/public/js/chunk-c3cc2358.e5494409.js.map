{"version":3,"sources":["webpack:///./src/components/customer/gradeRules.vue?af90","webpack:///src/components/customer/gradeRules.vue","webpack:///./src/components/customer/gradeRules.vue?4fb8","webpack:///./src/components/customer/gradeRules.vue","webpack:///./src/components/customer/gradeRules.vue?0d38","webpack:///./src/components/customer/setVipGrade.vue?8e19","webpack:///./src/components/customer/services/index.js","webpack:///src/components/customer/setVipGrade.vue","webpack:///./src/components/customer/setVipGrade.vue?6b6e","webpack:///./src/components/customer/setVipGrade.vue","webpack:///./src/components/customer/setVipGrade.vue?2925","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","data","on","radioChangeFn","model","value","rules","callback","$$v","$set","expression","staticStyle","attrs","_v","isNoway","_e","_l","item","index","key","checkboxDisabled","val","checkboxChangeFn","type","changeFn","label","style","marginLeft","_s","renderTypeName","$event","InputChange","condType","renderFn","staticRenderFns","name","details","timeList","isEmpty","props","isEditing","dataObj","watch","init","mounted","methods","time_t","value_t","name_t","unit_t","forEach","p","checked","$emit","$forceUpdate","component","title","VipVisible","closedFn","ref","tableData","maxHeight","scopedSlots","_u","fn","row","id","isAutoUpgrade","handleRowChange","selectId","scope","color","no","cancelVip","sureVip","CustomerApi","params","request","baseURL","SERVICE_MODULE_MAP","accounts","url","method","components","GradeRules","selectData","searchAll","searchCond","onLoad","created","getMemberGradeAutoUpgrade","show","customerApi","then","getMemberGradeList","res","memberGradeId","ids","push","setsCustomers","_defineProperties","target","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError"],"mappings":"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","file":"js/chunk-c3cc2358.e5494409.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gradeRules\"},[(_vm.data.isEditing)?_c('div',[(_vm.data.rules)?_c('div',{staticClass:\"edit_rules\"},[_c('p',[_c('el-radio-group',{on:{\"change\":_vm.radioChangeFn},model:{value:(_vm.data.rules.condType),callback:function ($$v) {_vm.$set(_vm.data.rules, \"condType\", $$v)},expression:\"data.rules.condType\"}},[_c('el-radio',{staticStyle:{\"margin-right\":\"16px\"},attrs:{\"label\":1}},[_vm._v(\"满足勾选的任一条件\")]),_c('el-radio',{staticStyle:{\"margin-right\":\"16px\"},attrs:{\"label\":2}},[_vm._v(\"满足勾选的全部条件\")]),(!_vm.isNoway)?_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"无门槛\")]):_vm._e()],1)],1),_vm._l((_vm.data.rules.details),function(item,index){return [_c('p',{key:index},[_c('el-checkbox',{attrs:{\"disabled\":_vm.checkboxDisabled},on:{\"change\":function (val){ return _vm.checkboxChangeFn(val,item); }},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}}),(item.type!=0)?_c('el-select',{staticStyle:{\"width\":\"100px\",\"margin\":\"4px 8px\"},attrs:{\"disabled\":_vm.checkboxDisabled,\"size\":\"mini\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeFn},model:{value:(item.period),callback:function ($$v) {_vm.$set(item, \"period\", $$v)},expression:\"item.period\"}},_vm._l((_vm.timeList),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1):_vm._e(),_c('span',{staticStyle:{\"margin-right\":\"10px\"},style:({marginLeft:item.type==0?'8px':''})},[_vm._v(\" \"+_vm._s(_vm.renderTypeName(item)))]),(item.type!=0)?_c('el-input',{staticStyle:{\"width\":\"100px\"},attrs:{\"disabled\":_vm.checkboxDisabled,\"type\":\"number\",\"size\":\"mini\",\"min\":0},on:{\"change\":function($event){return _vm.InputChange(item)}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}}):_vm._e(),_vm._v(\" \"+_vm._s(item.type==2?'笔':item.type==0?'':'元')+\" \")],1)]})],2):_vm._e()]):_c('div',[(_vm.data.rules)?_c('div',[_c('p',[_vm._v(_vm._s(_vm.data.rules.condType == 1 ? \"满足以下任一条件\" : _vm.data.rules.condType == 2 ?\"满足以下全部条件\":\"无门槛\"))]),_vm._l((_vm.data.rules.details),function(item,index){return [(item.checked)?_c('p',{key:index},[_vm._v(_vm._s(_vm.renderFn(item)))]):_vm._e()]})],2):_vm._e(),(_vm.isEmpty)?_c('div',[_vm._v(\"无门槛\")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"gradeRules\">\n    <div v-if=\"data.isEditing\"> \n      <div v-if=\"data.rules\" class=\"edit_rules\">\n        <p>\n          <el-radio-group v-model=\"data.rules.condType\" @change=\"radioChangeFn\">\n            <el-radio :label=\"1\" style=\"margin-right:16px;\">满足勾选的任一条件</el-radio>\n            <el-radio :label=\"2\" style=\"margin-right:16px;\">满足勾选的全部条件</el-radio>\n            <el-radio :label=\"3\" v-if=\"!isNoway\">无门槛</el-radio>\n          </el-radio-group>\n        </p>\n        <template v-for=\"(item,index) in data.rules.details\">\n          <p :key=\"index\" >\n            <el-checkbox\n              v-model=\"item.checked\" :disabled=\"checkboxDisabled\"\n              @change=\"val=>checkboxChangeFn(val,item)\"></el-checkbox>\n            <el-select \n              :disabled=\"checkboxDisabled\"\n              v-model=\"item.period\" \n              v-if=\"item.type!=0\"\n              size=\"mini\" style=\"width:100px; margin:4px 8px;\"\n              placeholder=\"请选择\" @change=\"changeFn\">\n              <el-option\n                v-for=\"item in timeList\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n            <span \n              style=\"margin-right:10px;\" \n              :style=\"{marginLeft:item.type==0?'8px':''}\">\n              {{renderTypeName(item)}}</span>\n            <el-input \n              :disabled=\"checkboxDisabled\"\n              v-if=\"item.type!=0\"\n              v-model=\"item.value\" \n              type=\"number\" size=\"mini\" \n              style=\"width:100px;\"\n              :min='0'\n              @change=\"InputChange(item)\"></el-input>\n            {{item.type==2?'笔':item.type==0?'':'元'}}\n          </p>\n        </template>\n      </div>\n    </div>\n    <div v-else>\n      <div v-if=\"data.rules\">\n        <p>{{data.rules.condType == 1 ? \"满足以下任一条件\" : data.rules.condType == 2 ?\"满足以下全部条件\":\"无门槛\"}}</p>\n        <template v-for=\"(item,index) in data.rules.details\">\n          <p :key=\"index\" v-if=\"item.checked\">{{renderFn(item)}}</p>\n        </template>\n      </div>\n      <div v-if=\"isEmpty\" >无门槛</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name:'gradeRules',\n  data(){\n    return{\n      data:{},\n      details:[],\n      timeList:[\n        {label:'历史累计',value:1},\n        {label:'近1年',value:2},\n        {label:'近3月',value:3},\n        {label:'近1月',value:4},\n        {label:'近7天',value:5},\n        {label:'近1天',value:6},\n      ],\n      checkboxDisabled:false,\n      isEmpty:false//等级规则是否为空\n    }\n  },\n  props:{\n    isEditing:Boolean,\n    isNoway:Boolean,\n    dataObj:Object\n  },\n  watch:{\n    dataObj(){\n      this.init();\n    }\n  },\n  mounted(){\n    this.init();\n  },\n  methods:{\n    init(){\n      this.data = this.dataObj;\n      if(this.isNoway){\n        this.checkboxDisabled = false;\n      }\n      // if(this.data.rules.condType == 0){\n      //   let flag = true;\n      //   let rulesDetail = this.data.rules.details;\n      //   rulesDetail.forEach(p =>{\n      //     if(p.checked){\n      //       flag = false;\n      //     }\n      //   });\n      //   if(flag){\n      //     this.isEmpty = true;\n      //   }\n      // }\n    },\n    renderFn(item){\n      let time_t = '';\n      let name_t = '';\n      let value_t = '';\n      let unit_t = '';\n      \n      if(item.period == 1){\n        time_t = '历史累计';\n      }else if(item.period == 2){\n        time_t = '近1年';\n      }else if(item.period == 3){\n        time_t = '近3月';\n      }else if(item.period == 4){\n        time_t = '近1月';\n      }else if(item.period == 5){\n        time_t = '近7天';\n      }else if(item.period == 6){\n        time_t = '近1天';\n      }\n      value_t = item.value;\n      if(item.type == 0){\n        time_t = '';\n        name_t = '无门槛';\n        value_t = '';\n        unit_t = '';\n      }else if(item.type == 1){\n        name_t = '购买金额达';\n        unit_t = '元';\n      }else if(item.type == 2){\n        name_t = '消费次数达';\n        unit_t = '笔';\n      }else if(item.type == 3){\n        name_t = '回款金额达';\n        unit_t = '元';\n      }else if(item.type == 4){\n        name_t = '充值金额达';\n        unit_t = '元';\n      }\n      return time_t + name_t + value_t + unit_t;\n    },\n    renderTypeName(item){\n      let name_t = '';\n      if(item.type == 0){\n        name_t = '无门槛';\n      }else if(item.type == 1){\n        name_t = '购买金额达';\n      }else if(item.type == 2){\n        name_t = '消费次数达';\n      }else if(item.type == 3){\n        name_t = '回款金额达';\n      }else if(item.type == 4){\n        name_t = '充值金额达';\n      }\n      return name_t;\n    },\n    radioChangeFn(val){\n      if(val == 3){\n        this.data.rules.details.forEach( p=>{\n          if(p.type){\n            p.checked = false;\n            // p.value = \"\";\n          }\n        })\n        this.checkboxDisabled = true;\n      }else{\n        this.checkboxDisabled = false;\n      }\n      this.changeFn();\n    },\n    checkboxChangeFn(val,item){\n      // if(item.type==0){\n      //   this.data.rules.details.forEach( p=>{\n      //     if(p.type){\n      //       p.checked = false;\n      //     }\n      //   })\n      // }else{\n      //   if(val){\n      //     this.data.rules.details[0].checked = false;\n      //   }\n      // }\n      this.changeFn();\n    },\n    changeFn(){\n      this.$emit(\"change\",this.data);\n    },\n    InputChange(item){\n      if(item.value && Number(item.value || 0) < 0){\n        item.value = '0';\n      }\n      // else if(item.value && Number(item.value || 10) > 10){\n      //   item.value = '10';\n      // }\n      if(item.value && item.type != 2){\n        item.value  =  Number(item.value ).toFixed(2);\n      }\n      if(item.value && item.type == 2){\n        item.value  =  Number(item.value ).toFixed(0);\n      }\n      this.$forceUpdate();\n      this.$emit(\"change\",this.data);\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.gradeRules{\n  text-align: left;\n  .edit_rules{\n    /deep/input::-webkit-outer-spin-button,\n    /deep/input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n    }\n  }\n \n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gradeRules.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gradeRules.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./gradeRules.vue?vue&type=template&id=21f316e2&scoped=true&\"\nimport script from \"./gradeRules.vue?vue&type=script&lang=js&\"\nexport * from \"./gradeRules.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gradeRules.vue?vue&type=style&index=0&id=21f316e2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21f316e2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gradeRules.vue?vue&type=style&index=0&id=21f316e2&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.VipVisible,\"close-on-click-modal\":false,\"width\":\"800px\"},on:{\"update:visible\":function($event){_vm.VipVisible=$event},\"close\":_vm.closedFn}},[_c('div',[_c('el-table',{ref:\"multipleTable\",staticClass:\"xtable\",staticStyle:{\"width\":\"100%\",\"margin\":\"10px 0\"},attrs:{\"size\":\"small\",\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\",\"tooltip-effect\":\"dark\",\"max-height\":_vm.maxHeight}},[_c('el-table-column',{attrs:{\"type\":\"radio\",\"align\":\"center\",\"width\":\"55\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-radio',{attrs:{\"label\":props.row.id,\"disabled\":_vm.isAutoUpgrade},on:{\"change\":function($event){return _vm.handleRowChange(props.row)}},model:{value:(_vm.selectId),callback:function ($$v) {_vm.selectId=$$v},expression:\"selectId\"}},[_vm._v(_vm._s(\"\"))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"no\",\"label\":\"会员等级\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{style:({color:scope.row.color})},[_vm._v(\" \"+_vm._s(scope.row.no)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"align\":\"center\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"rules\",\"label\":\"等级规则\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('GradeRules',{attrs:{\"dataObj\":scope.row}})]}}])})],1),_c('p',{staticClass:\"tip_txt\"},[_vm._v(\" 客户等级自动升级时不能手动配置会员等级，自动升级关闭时可为客户设置任意等级 \")]),_c('p',[_c('span',[_vm._v(\"当前自动升级已\")]),_c('span',{staticClass:\"tip_warning\"},[_vm._v(_vm._s(_vm.isAutoUpgrade?'开启':'关闭'))]),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\"可前往: 客户 -> 会员等级【配置等级更新模式】中进行修改\")])])],1),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"8px\"}},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.cancelVip}},[_vm._v(\"取消\")]),(!_vm.isAutoUpgrade)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.sureVip}},[_vm._v(\"确定\")]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request, { SERVICE_MODULE_MAP } from \"@/utils/request\";\n\n\nexport class CustomerApi {\n\n  //获取客户列表 \n  getCustomersList(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/customers`,\n      method: \"get\",\n      params\n    });\n  }\n\n\n  //客户基础信息设置 \n  setsCustomers(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/customers/sets`,\n      method: \"post\",\n      data: params\n    });\n  }\n  \n  //获取配置等级更新模式 \n  getMemberGradeAutoUpgrade(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/members-grades/auto-upgrade`,\n      method: \"get\",\n      params\n    });\n  }\n  \n  //通过\n  agree(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/customers/${params.id}/agree`,\n      method: \"post\",\n      data: params\n    });\n  }\n\n  //拒绝\n  refuse(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/customers/${params.id}/refuse`,\n      method: \"post\",\n      data: params\n    });\n  }\n\n  //获取标签list \n  getLabelList(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/companies/labels`,\n      method: \"get\",\n      params\n    });\n  }\n\n  //获取erp的客户列表(关联本地客户) \n  getErpList(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/customers/erp`,\n      method: \"get\",\n      params\n    });\n  }\n\n  //获取会员等级list \n  getMemberGradeList(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/members-grades`,\n      method: \"get\",\n      params\n    });\n  }\n\n  //字典数据列表 \n  getDicts(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/dicts`,\n      method: \"get\",\n      params\n    });\n  }\n\n  //根据公司ID获取员工列表信息 \n  getStaffsBycid(params) {\n    return request({\n      baseURL: SERVICE_MODULE_MAP.accounts,\n      url: `/staffs/by-cid`,\n      method: \"get\",\n      params\n    });\n  }\n}\n","<template>\n  <el-dialog \n      :title=\"title\" \n      :visible.sync=\"VipVisible\" \n      :close-on-click-modal=\"false\" \n      @close=\"closedFn\" \n      width=\"800px\">\n  \n    <div>\n        <el-table ref=\"multipleTable\"  \n          class=\"xtable\" size=\"small\"\n          :data=\"tableData\" border  stripe\n          tooltip-effect=\"dark\" \n          :max-height=\"maxHeight\"\n          style=\"width: 100%;margin:10px 0;\">\n          <el-table-column\n            type=\"radio\"\n            align='center'\n            width=\"55\">\n            <template v-slot=\"props\">\n              <el-radio\n                v-model=\"selectId\"\n                :label=\"props.row.id\"\n                :disabled=\"isAutoUpgrade\"\n                @change=\"handleRowChange(props.row)\"\n              >{{\"\"}}</el-radio>\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"no\"\n            label=\"会员等级\"\n            align='center'\n            width=\"120\">\n            <template slot-scope=\"scope\">\n              <span :style=\"{color:scope.row.color}\">\n                {{scope.row.no}}\n              </span>\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"name\"\n            label=\"名称\"\n            align='center'\n           width=\"150\">\n          </el-table-column>\n          <el-table-column\n            prop=\"rules\"\n            label=\"等级规则\"\n            align='center'\n            >\n            <template slot-scope=\"scope\">\n              <GradeRules \n                :dataObj=\"scope.row\" />\n            </template>\n          </el-table-column>\n        </el-table>\n        <p class=\"tip_txt\">\n          客户等级自动升级时不能手动配置会员等级，自动升级关闭时可为客户设置任意等级\n        </p>\n        <p >\n          <span>当前自动升级已</span>\n          <span class=\"tip_warning\">{{isAutoUpgrade?'开启':'关闭'}}</span>\n          <span style=\"margin-left:10px;\">可前往: 客户 -> 会员等级【配置等级更新模式】中进行修改</span>\n        </p>\n    </div>\n    <div style=\"text-align: right; margin-top:8px; \">\n      <el-button size=\"small\"  @click=\"cancelVip\">取消</el-button>\n      <el-button type=\"primary\" size=\"small\"\n        v-if=\"!isAutoUpgrade\"\n        @click=\"sureVip\">确定</el-button>\n    </div>\n   \n  </el-dialog>\n</template>\n\n<script>\nimport GradeRules from \"./gradeRules.vue\"\nimport { CustomerApi } from './services'\nconst customerApi = new CustomerApi();\n\nexport default {\n  name:\"setVipGrade\",\n  components:{\n    GradeRules\n  },\n  data(){\n    return{\n      VipVisible:false,\n      title:\"修改会员等级\",\n      tableData:[],\n      maxHeight:'300',\n      selectId:0,\n      isAutoUpgrade:false,//是否自动升级\n    }\n  },\n  props:{\n    \n    selectData:Array,\n    searchAll:Boolean,\n    searchCond:Object\n    \n  },\n  watch:{\n    selectData(){\n      this.onLoad();\n    }\n  },\n  created(){\n    this.init();\n    this.getMemberGradeAutoUpgrade();//获取配置等级更新模式\n  },\n  // mounted(){\n  //   this.onLoad();\n  // },\n  methods:{\n    show(){\n      this.VipVisible = true;\n    },\n    closedFn(){\n      this.VipVisible = false;\n    },\n    getMemberGradeAutoUpgrade(){\n      customerApi.getMemberGradeAutoUpgrade().then(res =>{\n        this.isAutoUpgrade = res;\n      })\n    },\n    init(){\n      this.tableData = [\n        {\n          id: 0,\n          name: \"无\",\n          no: \"0\",\n          rules:{}\n        }\n      ];\n      customerApi.getMemberGradeList().then(res =>{\n        if(res){\n          res.forEach(p =>{\n            if(p.status == 1){\n              this.tableData.push(p);\n            }\n          })\n        }\n      })\n    },\n    onLoad(){\n\n      if(this.selectData.length == 1){\n        if(this.selectData[0].id == undefined)return;\n        let memberGradeId = this.selectData[0].memberGradeId!=undefined?\n            this.selectData[0].memberGradeId:this.selectData[0].memberGrade.id;\n        this.selectId = memberGradeId;\n      }\n    },\n    handleRowChange(row){\n      this.selectId = row.id;\n    },\n  \n    cancelVip(){\n      this.closedFn();\n    },\n    sureVip(){\n      let params = {\n        ids:[],\n        searchAll:this.searchAll,\n        searchCond:this.searchCond,\n        memberGradeId:this.selectId\n      };\n      this.selectData.forEach(p =>{\n        params.ids.push(p.id);\n      })\n      customerApi.setsCustomers(params).then(res =>{\n        this.VipVisible = false;\n        this.$message.success('修改会员等级成功');\n        this.$emit('onRefresh',true);\n\n      })\n    },\n\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.tip_txt{\n  color:@color-error;\n}\n.tip_warning{\n  color:@color-warning;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setVipGrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setVipGrade.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./setVipGrade.vue?vue&type=template&id=75a8d7b1&scoped=true&\"\nimport script from \"./setVipGrade.vue?vue&type=script&lang=js&\"\nexport * from \"./setVipGrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./setVipGrade.vue?vue&type=style&index=0&id=75a8d7b1&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75a8d7b1\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setVipGrade.vue?vue&type=style&index=0&id=75a8d7b1&lang=less&scoped=true&\"","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}"],"sourceRoot":""}