<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单例模式</title>
</head>

<body>
    <button id="Id">创建</button>
    <script>
        // 单体模式
        // var Singleton = function (name) {
        //     this.name = name;
        // };
        // Singleton.prototype.getName = function () {
        //     return this.name;
        // }
        // // 获取实例对象
        // var getInstance = (function () {
        //     var instance = null;
        //     return function (name) {
        //         if (!instance) {
        //             instance = new Singleton(name);
        //         }
        //         return instance;
        //     }
        // })();
        // // 测试单体模式的实例
        // var a = getInstance("aa");
        // var b = getInstance("bb");
        // console.dir(a)
        // console.dir(b)

        // // 实现单体模式弹窗
        // var createWindow = (function () {
        //     var div;
        //     return function () {
        //         if (!div) {
        //             div = document.createElement("div");
        //             div.innerHTML = "我是弹窗内容";
        //             div.style.display = 'none';
        //             document.body.appendChild(div);
        //         }
        //         return div;
        //     }
        // })();
        // document.getElementById("Id").onclick = function () {
        //     // 点击后先创建一个div元素
        //     var win = createWindow();
        //     win.style.display = "block";
        // }

        // 创建div
        var createWindow = function () {
            var div = document.createElement("div");
            div.innerHTML = "我是弹窗内容";
            div.style.display = 'none';
            document.body.appendChild(div);
            return div;
        };
        // 创建iframe
        var createIframe = function () {
            var iframe = document.createElement("iframe");
            document.body.appendChild(iframe);
            return iframe;
        };
        // 获取实例的封装代码
        var getInstance = function (fn) {
            var result;
            return function () {
                return result || (result = fn.call(this, arguments));
            }
        };
        // 测试创建div
        var createSingleDiv = getInstance(createWindow);
        // document.getElementById("Id").onclick = function () {
        //     var win = createSingleDiv();
        //     win.style.display = "block";
        // };
        document.getElementById("Id").addEventListener('click', function () {
            var win = createSingleDiv();
            win.style.display = "block";
            win.style.color = "red";
        })
        // 测试创建iframe
        var createSingleIframe = getInstance(createIframe);
        // document.getElementById("Id").onclick = function () {
        //     var win = createSingleIframe();
        //     win.src = "http://cnblogs.com";
        // };
        document.getElementById("Id").addEventListener('click', function () {
            var win = createSingleIframe();
            win.src = "http://cnblogs.com";
        })
    </script>
</body>

</html>